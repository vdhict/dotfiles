#!/usr/bin/env bash
# {{ template "scripts-library" }}

true || source ../.chezmoitemplates/scripts-library

FISH_PLUGINS_FILE="{{ .paths.config }}/fish/fish_plugins"

if [[ ! -f "${FISH_PLUGINS_FILE}" ]]; then
  log_info "No fish_plugins file found, skipping plugin installation"
  exit 0
fi

# Check if fisher is installed
if ! fish -c "type -q fisher" 2>/dev/null; then
  log_task "Installing fisher (fish plugin manager)..."
  fish -c 'curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher install jorgebucaran/fisher'
fi

log_task "Installing fish plugins..."
fish -c "fisher update"

log_success "Fish plugins installed"
